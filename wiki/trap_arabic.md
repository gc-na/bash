# [لينكس] Bash trap الاستخدام: التحكم في إشارات النظام

## Overview
أمر `trap` في Bash يُستخدم لالتقاط ومعالجة إشارات النظام. يمكن استخدامه لتنفيذ أوامر معينة عند تلقي إشارات مثل إنهاء العملية أو التوقف المؤقت. هذا يمكن أن يكون مفيدًا لتنظيف الموارد أو حفظ الحالة قبل خروج البرنامج.

## Usage
الصيغة الأساسية لأمر `trap` هي:

```bash
trap [options] [commands] [signals]
```

## Common Options
- `-l`: عرض قائمة بجميع الإشارات المتاحة.
- `-p`: عرض الأوامر المرتبطة بالإشارات الحالية.
- `SIGNAL`: يمكن أن يكون اسم إشارة (مثل `SIGINT`) أو رقم الإشارة.

## Common Examples

### 1. التقاط إشارة إنهاء
يمكنك استخدام `trap` لتنفيذ أمر عند تلقي إشارة إنهاء (SIGINT) مثل الضغط على Ctrl+C:

```bash
trap 'echo "تم إنهاء البرنامج"; exit' SIGINT
```

### 2. تنظيف الملفات المؤقتة
يمكنك إعداد `trap` لتنظيف الملفات المؤقتة عند الخروج من البرنامج:

```bash
trap 'rm -f /tmp/tempfile; echo "تم حذف الملفات المؤقتة"' EXIT
```

### 3. التقاط عدة إشارات
يمكنك التقاط عدة إشارات في نفس الوقت:

```bash
trap 'echo "تم تلقي إشارة!"' SIGINT SIGTERM
```

## Tips
- تأكد من اختبار الأوامر التي تستخدمها مع `trap` لتجنب فقدان البيانات.
- استخدم `trap` مع الإشارة `EXIT` لتنفيذ أوامر التنظيف في جميع حالات الخروج.
- يمكن أن يساعد استخدام `trap` في تحسين استقرار البرامج من خلال التعامل مع الإشارات بشكل مناسب.