# [Linux] Bash mapfile の使い方: 配列にファイルの内容を読み込む

## Overview
`mapfile` コマンドは、ファイルの内容を Bash の配列に読み込むための便利なツールです。このコマンドを使用することで、ファイルの各行を配列の要素として簡単に扱うことができます。

## Usage
基本的な構文は以下の通りです。

```bash
mapfile [options] [array_name]
```

ここで、`array_name` は読み込んだデータを格納する配列の名前です。

## Common Options
- `-n NUM`: 読み込む行数を指定します。`NUM` には整数を指定します。
- `-t`: 各行の末尾の改行を削除します。
- `-O NUM`: 配列の開始インデックスを指定します。デフォルトは 0 です。

## Common Examples
以下に、`mapfile` コマンドのいくつかの実用的な例を示します。

### 例 1: ファイルの内容を配列に読み込む
```bash
mapfile lines < myfile.txt
```
このコマンドは、`myfile.txt` の各行を `lines` という配列に読み込みます。

### 例 2: 改行を削除して読み込む
```bash
mapfile -t lines < myfile.txt
```
`-t` オプションを使用すると、各行の末尾の改行が削除されます。

### 例 3: 特定の行数だけ読み込む
```bash
mapfile -n 5 lines < myfile.txt
```
このコマンドは、`myfile.txt` から最初の 5 行だけを `lines` 配列に読み込みます。

### 例 4: 配列のインデックスを指定する
```bash
mapfile -O 1 lines < myfile.txt
```
`-O` オプションを使用すると、配列のインデックスを 1 から開始することができます。

## Tips
- `mapfile` を使用する際は、ファイルの行数が多い場合、メモリの使用量に注意してください。
- 配列の内容を確認するには、`echo "${lines[@]}"` を使用して出力できます。
- `mapfile` は、スクリプト内でのデータ処理を効率化するために非常に役立ちます。特に、ファイルの行を簡単に操作したい場合に便利です。