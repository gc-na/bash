# [Linux] Bash tcpdump 使用方法: 捕获网络数据包

## 概述
tcpdump 是一个强大的命令行工具，用于捕获和分析网络流量。它允许用户监控通过网络接口传输的数据包，并提供详细的信息，便于网络故障排查和安全分析。

## 用法
基本语法如下：
```bash
tcpdump [选项] [参数]
```

## 常用选项
- `-i <接口>`: 指定要监听的网络接口，例如 `eth0`。
- `-n`: 不解析主机名，直接显示IP地址。
- `-v`: 提供更详细的输出信息。
- `-c <数量>`: 捕获指定数量的数据包后停止。
- `-w <文件>`: 将捕获的数据包写入指定文件。
- `-r <文件>`: 从指定文件读取数据包进行分析。

## 常见示例
1. 捕获所有流量：
   ```bash
   tcpdump
   ```

2. 捕获特定接口上的流量：
   ```bash
   tcpdump -i eth0
   ```

3. 捕获并保存数据包到文件：
   ```bash
   tcpdump -i eth0 -w output.pcap
   ```

4. 从文件读取并分析数据包：
   ```bash
   tcpdump -r output.pcap
   ```

5. 捕获特定数量的数据包：
   ```bash
   tcpdump -c 10
   ```

6. 捕获特定端口的流量（例如HTTP端口80）：
   ```bash
   tcpdump -i eth0 port 80
   ```

## 提示
- 使用 `-n` 选项可以加快捕获速度，因为它避免了DNS解析。
- 在进行长时间捕获时，使用 `-w` 选项将数据包保存到文件中，以便后续分析。
- 定期检查捕获的数据包文件的大小，以防止磁盘空间耗尽。
- 结合 `-v` 选项可以获取更详细的信息，帮助更好地理解流量内容。