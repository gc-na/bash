# [리눅스] Bash mpstat 사용법: CPU 사용량 모니터링

## Overview
mpstat 명령어는 시스템의 CPU 사용량을 모니터링하고, 각 CPU 코어의 성능 통계를 출력하는 데 사용됩니다. 이 명령어는 시스템의 부하를 분석하고 성능 문제를 진단하는 데 유용합니다.

## Usage
mpstat 명령어의 기본 구문은 다음과 같습니다:

```bash
mpstat [options] [arguments]
```

## Common Options
- `-P ALL`: 모든 CPU 코어의 통계를 표시합니다.
- `-u`: CPU 사용률을 보여줍니다.
- `-r`: 메모리 사용량을 보여줍니다.
- `-h`: 출력 형식을 사람이 읽기 쉬운 형태로 표시합니다.
- `interval`: 통계를 업데이트할 간격(초)을 지정합니다.
- `count`: 통계 출력을 반복할 횟수를 지정합니다.

## Common Examples
1. 모든 CPU 코어의 사용량을 1초 간격으로 출력하기:
   ```bash
   mpstat -P ALL 1
   ```

2. CPU 사용률을 5초마다 3회 출력하기:
   ```bash
   mpstat -u 5 3
   ```

3. 메모리 사용량과 CPU 사용량을 출력하기:
   ```bash
   mpstat -r -u 1
   ```

4. 사람이 읽기 쉬운 형식으로 CPU 사용량 출력하기:
   ```bash
   mpstat -h 1
   ```

## Tips
- mpstat를 사용할 때, CPU 사용량의 변화를 주의 깊게 관찰하여 시스템의 성능 병목 현상을 파악하세요.
- 여러 번의 샘플을 수집하여 평균 값을 계산하면 보다 정확한 성능 분석이 가능합니다.
- 시스템의 부하가 높은 경우, mpstat의 출력을 통해 어떤 프로세스가 CPU를 많이 사용하는지 추가적으로 분석할 수 있습니다.