# [Linux] Bash mapfile 用法: 从文件读取数组

## 概述
`mapfile` 命令用于从文件或标准输入读取数据并将其存储到数组中。这个命令特别适合处理多行文本数据，使得在 Bash 脚本中操作这些数据变得更加方便。

## 用法
基本语法如下：
```bash
mapfile [选项] [数组名]
```

## 常用选项
- `-n N`：只读取前 N 行。
- `-s N`：跳过前 N 行。
- `-t`：去掉每行末尾的换行符。
- `-O N`：从数组的第 N 个索引开始填充。

## 常见示例
### 示例 1: 从文件读取数据
将文件 `data.txt` 中的每一行读取到数组 `lines` 中：
```bash
mapfile lines < data.txt
```

### 示例 2: 读取前 5 行
只读取 `data.txt` 文件的前 5 行：
```bash
mapfile -n 5 lines < data.txt
```

### 示例 3: 跳过前 2 行
跳过 `data.txt` 的前 2 行，然后将其余行读取到数组中：
```bash
mapfile -s 2 lines < data.txt
```

### 示例 4: 去掉换行符
读取文件并去掉每行末尾的换行符：
```bash
mapfile -t lines < data.txt
```

## 提示
- 使用 `-t` 选项可以避免在处理数组时出现意外的换行符。
- 如果需要处理大文件，考虑使用 `-n` 和 `-s` 选项来限制读取的行数，避免内存占用过高。
- 在使用 `mapfile` 时，确保数组名未被其他变量占用，以免造成混淆。