# [Linux] Bash trap использование: управление сигналами и завершением скриптов

## Обзор
Команда `trap` в Bash используется для обработки сигналов и выполнения определённых действий при завершении скрипта или получении сигнала. Это позволяет управлять поведением скрипта, например, очищать временные файлы или выводить сообщения перед завершением.

## Использование
Основной синтаксис команды `trap` выглядит следующим образом:

```bash
trap [действие] [сигналы]
```

## Общие опции
- `EXIT` — выполняет действие при выходе из скрипта.
- `SIGINT` — выполняет действие при получении сигнала прерывания (обычно Ctrl+C).
- `SIGTERM` — выполняет действие при получении сигнала завершения.
- `SIGQUIT` — выполняет действие при получении сигнала выхода (обычно Ctrl+\).

## Общие примеры

### Пример 1: Очистка временных файлов
```bash
trap 'rm -f /tmp/tempfile' EXIT
# Ваш код здесь
```
В этом примере временный файл будет удалён при выходе из скрипта.

### Пример 2: Обработка сигнала прерывания
```bash
trap 'echo "Скрипт прерван!"; exit' SIGINT
while true; do
    echo "Работаю..."
    sleep 1
done
```
Этот скрипт будет выводить сообщение при нажатии Ctrl+C.

### Пример 3: Выполнение команды перед завершением
```bash
trap 'echo "Скрипт завершён."' EXIT
echo "Запуск скрипта..."
# Ваш код здесь
```
При завершении скрипта будет выведено сообщение.

## Советы
- Используйте `trap` для управления ресурсами, чтобы избежать утечек памяти или временных файлов.
- Помните, что `trap` может обрабатывать несколько сигналов одновременно, перечисляя их через пробел.
- Тестируйте обработку сигналов в безопасной среде, чтобы избежать неожиданных последствий.