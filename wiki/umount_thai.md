# [Linux] Bash umount การใช้งาน: ยกเลิกการเชื่อมต่อระบบไฟล์

## Overview
คำสั่ง `umount` ใช้สำหรับยกเลิกการเชื่อมต่อระบบไฟล์จากไดรฟ์หรืออุปกรณ์ที่เชื่อมต่ออยู่ โดยจะช่วยให้แน่ใจว่าข้อมูลทั้งหมดถูกบันทึกและไม่เกิดความเสียหายเมื่ออุปกรณ์ถูกถอดออก

## Usage
รูปแบบพื้นฐานของคำสั่ง `umount` คือ:

```
umount [options] [arguments]
```

## Common Options
- `-a`: ยกเลิกการเชื่อมต่อทุกระบบไฟล์ที่ระบุในไฟล์ `/etc/mtab`
- `-l`: ยกเลิกการเชื่อมต่อแบบเลื่อนลอย (lazy unmount) ซึ่งจะทำการยกเลิกการเชื่อมต่อเมื่อไม่มีการใช้งาน
- `-f`: บังคับยกเลิกการเชื่อมต่อแม้ว่าจะมีการใช้งานอยู่
- `-r`: ยกเลิกการเชื่อมต่อและทำการ mount ใหม่ในกรณีที่ไม่สามารถยกเลิกได้

## Common Examples
1. ยกเลิกการเชื่อมต่อระบบไฟล์ที่ระบุ:
   ```bash
   umount /mnt/mydrive
   ```

2. ยกเลิกการเชื่อมต่อทุกระบบไฟล์:
   ```bash
   umount -a
   ```

3. ยกเลิกการเชื่อมต่อแบบเลื่อนลอย:
   ```bash
   umount -l /mnt/mydrive
   ```

4. บังคับยกเลิกการเชื่อมต่อ:
   ```bash
   umount -f /mnt/mydrive
   ```

## Tips
- ตรวจสอบให้แน่ใจว่าไม่มีโปรเซสใดใช้งานไฟล์ในระบบไฟล์ที่ต้องการยกเลิกการเชื่อมต่อ
- ใช้คำสั่ง `lsof` เพื่อดูว่าไฟล์ใดถูกใช้งานอยู่ก่อนที่จะทำการยกเลิกการเชื่อมต่อ
- หากคุณต้องการยกเลิกการเชื่อมต่ออุปกรณ์ที่เชื่อมต่ออยู่ในขณะที่มีการใช้งาน ควรใช้ตัวเลือก `-l` หรือ `-f` ด้วยความระมัดระวัง